"use strict";$(document).ready(function(){console.time("tiempo");firebase.initializeApp({apiKey:"AIzaSyDZPvhThHsK7tG0kxwZ47q7XRMlE8AaZn0",authDomain:"projectf1834543.firebaseapp.com",databaseURL:"https://projectf1834543.firebaseio.com",projectId:"projectf1834543",storageBucket:"",messagingSenderId:"446281075829",appId:"1:446281075829:web:002598c4a1b1c00d"});var s=firebase.firestore(),n=$(".tareas");firebase.auth().onAuthStateChanged(function(){var e=firebase.auth().currentUser;if(null!==e){$(".inserForm").remove();var o=e.email;console.log(o),$(".sesionAc").slideToggle(),$(".inserForm").remove()}else console.log("Sesión inactiva"),$(".inserForm").slideToggle(),$(".sesionAc").remove()}),$(".iniSesion").click(function(e){e.preventDefault();var o,a,t=$("#usuario").val(),r=$("#contra").val();""===t&&""===r?console.log("Campos vacios"):(o=t,a=r,firebase.auth().signInWithEmailAndPassword(o,a).then(function(){console.log("Sesión activa")}).catch(function(){console.log("Por favor iniciar sesión")}))}),$(".iconAdd").on("click",function(){var e,o={borderColor:"rgb(231, 76, 60)"},a={borderColor:"rgb(41, 128, 185)"},t={borderColor:"rgba(44, 62, 80, .5"},r={selector:$("#entrada"),valor:$("#entrada").val()};""===r.valor?(r.selector.attr("placeholder","Campo obligatorio").addClass("error mover").css(o).on({focus:function(){$(this).css(a).attr("placeholder","Ingresar tarea").removeClass("error mover")},blur:function(){$(this).css(t)}}),setTimeout(function(){r.selector.removeClass("mover")},500)):(e=r.valor,s.collection("tasks").add({nombre:e.trim().toLowerCase(),estado:"incompleto",fecha:firebase.firestore.FieldValue.serverTimestamp()}).then(function(e){console.log("Document written with ID: ",e.id)}).catch(function(e){console.error("Error adding document: ",e)}),r.selector.val(""))}),s.collection("tasks").orderBy("fecha","desc").onSnapshot(function(e){n.html(""),e.forEach(function(e){var o,a,t,r=e.data().nombre,s=e.id,i=e.data().estado;n.append((t=a="","completo"===(o=i)&&(a="verde",t="raya"),'<div id="'+s+'" estado="'+o+'">\n              <p class="titulo '+t+'">'+r+'</p>\n              <i class="ok fas fa-check-circle '+a+'"></i>\n\t\t\t\t\t  </div>'))})}),n.on("click",".ok",function(e){e.preventDefault(),e.stopPropagation(),$(this).toggleClass("verde").prev(".titulo").toggleClass("raya");var o=$(this).parent("div").attr("id");s.collection("tasks").doc(o).update({estado:"completo"}).then(function(){console.log("Tarea completa")})}),console.timeEnd("tiempo")});